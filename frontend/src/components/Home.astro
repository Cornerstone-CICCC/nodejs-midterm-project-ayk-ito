---
import astroLogo from "../assets/astro.svg";
import background from "../assets/background.svg";
import "../styles/home.css";
---

<div class="food-blog-container">
  <header>
    <h1>Today's Delicious Moments</h1>
    <p class="subtitle">Share what you ate today with the world!</p>
  </header>

  <div class="user-profile">
    <div class="profile-card">
      <h2>My Profile</h2>
      <div id="profileInfo"></div>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </div>

  <section class="post-form-section">
    <h2>What did you eat today?</h2>
    <form id="foodPostForm" class="food-form">
      <div class="form-group">
        <label for="foodTitle">Food Name</label>
        <input type="text" id="foodTitle" name="foodTitle" required />
      </div>

      <div class="form-group">
        <label for="foodDescription">Description</label>
        <textarea id="foodDescription" name="foodDescription" rows="3" required></textarea>
      </div>

      <div class="form-group">
        <label for="foodImage">Upload Image</label>
        <input type="file" id="foodImage" name="foodImage" accept="image/*" required />
      </div>

      <div class="form-preview">
        <img id="imagePreview" class="hidden" src="#" alt="Preview" />
      </div>

      <button type="submit" class="submit-btn">Share Your Food</button>
    </form>
  </section>

  <section class="food-posts">
    <h2>Recent Delicious Moments</h2>

    <!-- Search form -->
    <div class="search-container">
      <form id="searchForm" class="search-form">
        <input
          type="text"
          id="searchInput"
          placeholder="Search food by name..."
          class="search-input"
        />
        <button type="submit" class="search-button">Search</button>
        <button type="button" id="resetSearch" class="reset-button">Reset</button>
      </form>
    </div>

    <div class="posts-container" id="postsContainer">
      <!-- Posts will be dynamically populated from the API -->
      <div class="loading">Loading your delicious moments...</div>
    </div>
  </section>

  <!-- Modal for displaying article details -->
  <div id="articleModal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <div class="modal-header">
        <div class="modal-actions">
          <button id="editArticleBtn" class="edit-btn">Edit</button>
          <button id="saveArticleBtn" class="save-btn hidden">Save</button>
          <button id="cancelEditBtn" class="cancel-btn hidden">Cancel</button>
          <button id="deleteArticleBtn" class="delete-btn">Delete</button>
        </div>
      </div>
      <div id="modalContent">
        <img id="modalImage" class="modal-image" src="" alt="" />
        <div class="modal-text-content">
          <h2 id="modalTitle" class="editable"></h2>
          <div id="modalTitleEdit" class="edit-field hidden">
            <input type="text" id="titleInput" class="edit-input" />
          </div>

          <p id="modalDate" class="modal-date"></p>

          <p id="modalDescription" class="editable"></p>
          <div id="modalDescriptionEdit" class="edit-field hidden">
            <textarea id="descriptionInput" class="edit-textarea" rows="5"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete confirmation modal -->
  <div id="deleteConfirmModal" class="modal delete-confirm-modal">
    <div class="modal-content delete-confirm-content">
      <span class="close-modal">&times;</span>
      <h2>Delete Food Post</h2>
      <p>Are you sure you want to delete this food post? This action cannot be undone.</p>
      <div class="delete-confirm-actions">
        <button id="confirmDeleteBtn" class="delete-btn">Yes, Delete</button>
        <button id="cancelDeleteBtn" class="cancel-btn">Cancel</button>
      </div>
    </div>
  </div>
</div>
